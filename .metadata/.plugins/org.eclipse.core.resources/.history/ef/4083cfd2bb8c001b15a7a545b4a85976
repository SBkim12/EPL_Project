var ws;
var messages = document.getElementById("messages");

function openSocket() {
	if (ws !== undefined && ws.readyState !== WebSocket.CLOSED) {
		writeResponse("WebSocket is already opened.");
		return;
	}
	// 웹소켓 객체 만드는 코드
	ws = new WebSocket("ws://localhost:9005/echo.do");

	ws.onopen = function(event) {
		if (event.data === undefined)
			return;

		writeResponse(event.data);
	};
	ws.onmessage = function(event) {
		writeResponse(event.data);
	};
	ws.onclose = function(event) {
		writeResponse("Connection closed");
	}
}

function send() {
	var text = document.getElementById("messageinput").value + ","
			+ document.getElementById("sender").value;
	ws.send(text);
	text = "";
}

function closeSocket() {
	ws.close();
}
function writeResponse(text) {
	messages.innerHTML += "<br/>" + text;
}